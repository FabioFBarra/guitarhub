<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GuitarHub | Afinador, Metrônomo e Ferramentas de Prática</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0778132624866197"
     crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="min-h-screen">

    <div id="main-tuner-view" class="container mx-auto p-4 md:p-8 max-w-7xl">
        
        <header class="text-center mb-6 md:mb-10">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold mb-3 tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-slate-200 to-slate-400">GuitarHub</h1>
            <p class="text-base sm:text-lg text-slate-400">Sua suíte de prática musical completa.</p>
        </header>
        
        <div class="ad-placeholder h-24 w-full mb-8 hidden md:flex items-center justify-center">
           <!-- Anúncio Horizontal (Desktop) - Substitua pelo seu código de anúncio -->
           <ins class="adsbygoogle"
                data-ad-client="ca-pub-0778132624866197"
                data-ad-slot="SEU_AD_SLOT_ID_AQUI"
                data-full-width-responsive="true"></ins>
           <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
           </script>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
            <main class="lg:col-span-3 text-center glass-panel p-4 sm:p-6 md:p-8">
                <p id="status-message" class="text-slate-400 mb-6">Clique em "Iniciar" para ativar o microfone.</p>
                
                <div id="tuner-display" class="tuner-circle border-8 border-neutral mx-auto mb-6">
                    <div class="tuner-markings"><span>-50</span><span>0</span><span>+50</span></div>
                    <div id="note-name" class="text-7xl sm:text-8xl font-bold text-slate-500">-</div>
                    <div id="frequency-display" class="text-lg sm:text-xl text-slate-500">0 Hz</div>
                    <div id="tuner-pointer" class="tuner-pointer"></div>
                    <div class="tuner-pointer-pivot"></div>
                </div>
                
                <button id="start-button" class="primary-btn text-white font-bold py-3 px-8 rounded-full text-lg">
                    Iniciar Afinador
                </button>

                <div id="vu-meter-container" class="w-full max-w-xs mx-auto mt-6 h-2 bg-slate-700 rounded-full overflow-hidden hidden">
                    <div id="vu-meter-bar" class="h-full bg-gradient-to-r from-sky-500 to-indigo-500"></div>
                </div>

                <div class="mt-8">
                    <p class="text-slate-400 text-sm mb-3">Tons de referência (Afinação Padrão)</p>
                    <div class="grid grid-cols-3 sm:grid-cols-6 gap-2">
                        <button class="string-button secondary-btn p-3 rounded-lg text-sm" data-note="E2" data-freq="82.41">E (6ª)</button>
                        <button class="string-button secondary-btn p-3 rounded-lg text-sm" data-note="A2" data-freq="110.00">A (5ª)</button>
                        <button class="string-button secondary-btn p-3 rounded-lg text-sm" data-note="D3" data-freq="146.83">D (4ª)</button>
                        <button class="string-button secondary-btn p-3 rounded-lg text-sm" data-note="G3" data-freq="196.00">G (3ª)</button>
                        <button class="string-button secondary-btn p-3 rounded-lg text-sm" data-note="B3" data-freq="246.94">B (2ª)</button>
                        <button class="string-button secondary-btn p-3 rounded-lg text-sm" data-note="E4" data-freq="329.63">E (1ª)</button>
                    </div>
                </div>
            </main>
            
            <aside class="lg:col-span-2 space-y-8">
                <div id="metronome-panel-main" class="glass-panel p-4 sm:p-6 md:p-8">
                     <h2 class="text-2xl font-bold mb-4 text-center">Metrônomo</h2>
                     <div class="metronome-indicator"></div>
                     <div class="flex flex-col gap-4">
                         <div class="text-center">
                             <span id="bpm-display-main" class="bpm-display text-2xl font-bold">120 BPM</span>
                             <input type="range" id="bpm-slider-main" class="bpm-slider w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer mt-2" min="40" max="220" value="120" aria-label="Ajustar BPM do metrônomo">
                         </div>
                         <select id="time-signature-select-main" class="time-signature-select select-input p-2 rounded-lg w-full" aria-label="Selecionar compasso do metrônomo">
                             <option value="4">4/4</option>
                             <option value="3">3/4</option>
                             <option value="2">2/4</option>
                             <option value="6">6/8</option>
                         </select>
                         <select id="backing-track-select-main" class="backing-track-select select-input p-2 rounded-lg w-full" aria-label="Selecionar backing track">
                            <option value="none">Sem Backing Track</option>
                            <option value="rock">Rock Básico</option>
                            <option value="pop">Pop Simples</option>
                         </select>
                         <button class="start-metronome-btn primary-btn text-white font-bold py-2 px-4 rounded-lg">Iniciar</button>
                     </div>
                </div>
                 <div class="glass-panel p-4 sm:p-6 md:p-8">
                     <h2 class="text-2xl font-bold mb-4 flex items-center gap-3 text-center justify-center">
                        <!-- Ícone de Biblioteca (Lucide Icons) -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-amber-400">
                            <path d="m16 6 4 14"/>
                            <path d="M12 6v14"/>
                            <path d="M8 8v12"/>
                            <path d="M4 4v16"/>
                        </svg>
                        Ferramentas de Prática
                    </h2>
                     
                     <div id="assistant-content" class="space-y-6">
                        <!-- Ferramenta de Escalas -->
                        <div id="scales-tab" class="text-center">
                            <p class="text-sm text-slate-400 mb-4">Entre na Sala de Estudo para visualizar escalas, gerar acordes e praticar com a bateria.</p>
                            <button id="visualize-scale" class="primary-btn text-white font-bold py-3 px-6 rounded-lg w-full">Entrar na Sala de Estudo</button>
                        </div>
                     </div>

                 </div>
            </aside>
        </div>
        
        <div class="ad-placeholder h-24 w-full mt-8 flex items-center justify-center">
           <!-- Anúncio Responsivo (Mobile / Fim da Página) - Substitua pelo seu código de anúncio -->
           <ins class="adsbygoogle"
                data-ad-client="ca-pub-0778132624866197"
                data-ad-slot="SEU_AD_SLOT_ID_AQUI"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
           <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
           </script>
        </div>
    </div>

    <!-- Scale Visualizer Fullscreen View -->
    <div id="scale-visualizer-view" class="hidden fixed inset-0 bg-gray-900 z-50 p-4 flex flex-col items-center">
        <div class="w-full max-w-7xl mx-auto text-center h-full flex flex-col">
            <div class="flex items-center justify-between mb-4 flex-shrink-0">
                <h2 class="text-2xl font-bold">Sala de Estudo</h2>
                <button id="back-to-tuner-btn" class="secondary-btn text-white font-bold py-2 px-4 rounded-lg">Voltar</button>
            </div>
            
            <!-- NEW: Scrollable content area -->
            <div class="flex-grow overflow-y-auto min-h-0 pb-4">
                <div id="fretboard-container" class="w-full flex flex-col space-y-4 md:space-y-0">
                    <!-- Wrapper principal que controla a visualização -->
                    <div id="fretboard-wrapper-1" class="fretboard-wrapper w-full">
                        <div id="fret-numbers-1" class="fret-numbers"></div>
                        <div id="fretboard-1" class="fretboard"></div>
                    </div>
                    <!-- Esta segunda parte só será visível em telas pequenas -->
                    <div id="fretboard-wrapper-2" class="fretboard-wrapper w-full">
                        <div id="fret-numbers-2" class="fret-numbers"></div>
                        <div id="fretboard-2" class="fretboard"></div>
                    </div>
                </div>
                
                <!-- Área para exibir os diagramas de acordes gerados -->
                <div id="chord-progression-display-area" class="mt-4 p-4 rounded-xl glass-panel hidden">
                    <div id="chord-diagrams-output" class="text-center"></div>
                </div>

                <div id="practice-controls-panel" class="glass-panel p-4 rounded-xl flex-shrink-0 mt-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Left Side: Scale & Display Controls -->
                    <div class="w-full">
                         <h3 class="text-lg font-bold mb-3 text-slate-300 text-center md:text-left">Configuração da Escala</h3>
                         <div class="flex items-center gap-2">
                            <select id="scale-key-visualizer" class="select-input p-2 rounded w-full" aria-label="Selecionar tom da escala no visualizador"><option value="0">C</option><option value="1">C#</option><option value="2">D</option><option value="3">D#</option><option value="4">E</option><option value="5">F</option><option value="6">F#</option><option value="7">G</option><option value="8">G#</option><option value="9">A</option><option value="10">A#</option><option value="11">B</option></select>
                            <select id="scale-type-visualizer" class="select-input p-2 rounded w-full" aria-label="Selecionar tipo de escala no visualizador"><option value="major">Maior</option><option value="minor">Menor</option><option value="majorPentatonic">Pentatônica Maior</option><option value="minorPentatonic">Pentatônica Menor</option><option value="blues">Blues</option></select>
                            <button id="mirror-fretboard" class="secondary-btn p-2 rounded flex-shrink-0" title="Espelhar Braço">
                                <!-- Ícone de Inversão Horizontal (Lucide Icons) -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M8 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3"/>
                                    <path d="M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3"/>
                                    <path d="M12 21V3"/>
                                </svg>
                            </button>
                         </div>
                        </div>

                        <!-- Center: Chord Progression Generator -->
                        <div class="w-full md:border-l md:border-r md:border-slate-700 md:px-6">
                            <h3 class="text-lg font-bold mb-3 text-slate-300 text-center md:text-left">Gerador de Acordes</h3>
                            <p class="text-sm text-slate-400 mb-2 text-center md:text-left">Cria uma progressão musical para praticar.</p>
                            <button id="generate-progression" class="primary-btn text-white font-bold py-2 px-4 rounded-lg w-full">Gerar Progressão</button>
                        </div>

                        <!-- Right Side: Metronome Controls -->
                        <div class="w-full">
                            <h3 class="text-lg font-bold mb-3 text-slate-300 text-center md:text-left">Metrônomo de Prática</h3>
                            <div class="flex flex-col gap-3">
                                <div class="flex items-center gap-4">
                                    <button class="start-metronome-btn primary-btn text-white font-bold py-2 px-4 rounded-lg flex-shrink-0">Tocar</button>
                                    <div class="metronome-indicator"></div>
                                    <div class="flex-grow text-center">
                                        <span id="bpm-display-practice" class="bpm-display font-bold">120 BPM</span>
                                    </div>
                                </div>
                                <input type="range" id="bpm-slider-practice" class="bpm-slider w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer" min="40" max="220" value="120" aria-label="Ajustar BPM do metrônomo de prática">
                                <div class="flex items-center gap-2">
                                    <select id="time-signature-select-practice" class="time-signature-select select-input p-2 rounded-lg w-full" aria-label="Selecionar compasso do metrônomo de prática"><option value="4">4/4</option><option value="3">3/4</option><option value="2">2/4</option><option value="6">6/8</option></select>
                                    <select id="backing-track-select-practice" class="backing-track-select select-input p-2 rounded-lg w-full" aria-label="Selecionar backing track de prática"><option value="none">Sem Backing Track</option><option value="rock">Rock Básico</option><option value="pop">Pop Simples</option></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ad-placeholder h-16 w-full mt-4 flex items-center justify-center md:col-span-3">
                        <!-- Anúncio na Sala de Estudo - Substitua pelo seu código de anúncio -->
                        <ins class="adsbygoogle"
                             data-ad-client="ca-pub-0778132624866197"
                             data-ad-slot="SEU_AD_SLOT_ID_AQUI"
                             data-ad-format="auto"
                             data-full-width-responsive="true"></ins>
                        <script>
                             (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Permission Modal -->
    <div id="permission-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
        <div class="glass-panel p-6 max-w-sm w-full text-left">
            <h3 class="text-xl font-bold mb-3">Permissão do Microfone</h3>
            <p class="text-slate-300 mb-4">O afinador precisa de acesso ao seu microfone. Por favor, permita o uso na barra de endereço do seu navegador.</p>
            <div class="bg-slate-900/50 p-3 rounded-md mb-4"><p class="font-semibold">Como permitir:</p><ol class="list-decimal list-inside text-sm text-slate-400 mt-1 space-y-1"><li>Clique no ícone de <strong>cadeado (🔒)</strong>.</li><li>Encontre "Microfone" na lista.</li><li>Mude a permissão para <strong>"Permitir"</strong>.</li></ol></div>
            <div class="flex justify-end gap-3"><button id="close-modal-btn" class="secondary-btn py-2 px-4 rounded-lg">Fechar</button><button id="retry-mic-btn" class="primary-btn text-white font-bold py-2 px-4 rounded-lg">Tentar Novamente</button></div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
